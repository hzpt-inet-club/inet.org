# è®¾è®¡æ¨¡å¼ç¬¬åä¸‰èŠ‚

## è´£ä»»é“¾æ¨¡å¼

### å¼•è¨€

è€äººä»¬å¸¸è¯´ï¼šâ€œ`ç­‰ä½ å¤§äº†ï¼Œä½ å°±çŸ¥é“åœºæ™¯å’Œåœºåœ°çš„é‡è¦æ€§äº†ã€‚`â€

è”ç³»å°„å‡»ğŸ¹éœ€è¦å»é¶åœºã€æ»‘é›ªâ›·ï¸éœ€è¦å»æ»‘é›ªåœºã€å¼€è½¦ğŸï¸éœ€è¦èƒ½ä¸Šè·¯å®è·µã€‚è€Œç¼–ç¨‹å¼€å‘é™¤äº†èƒ½å®Œæˆäº§å“çš„åŠŸèƒ½æµç¨‹ï¼Œè¿˜éœ€è¦ä¿è¯ç³»ç»Ÿçš„å¯é æ€§ã€‚å°±åƒåŒå­¦ä»¬å¯ä»¥å¬åˆ°çš„ä¸€äº›ç›‘æ§æŒ‡æ ‡ï¼šâ€œ[`QPS`](æ¯ç§’æŸ¥è¯¢ç‡)ã€[`TPS`](æ¯ç§’ä¼ è¾“çš„äº‹ç‰©å¤„ç†ä¸ªæ•°)ã€[`TP99`](æ»¡è¶³ç™¾åˆ†ä¹‹ä¹åçš„ç½‘ç»œè¯·æ±‚æ‰€éœ€è¦çš„æœ€ä½è€—æ—¶)ã€[`TP999`](æ»¡è¶³ç™¾åˆ†ä¹‹ä¹åä¹çš„ç½‘ç»œè¯·æ±‚æ‰€éœ€è¦çš„æœ€ä½è€—æ—¶)ã€[`å¯ç”¨ç‡`](è®¡ç®—æœºçš„å¯ç”¨æ—¶é—´ä¸æ•…éšœæ—¶é—´ï¼Œç»´ä¿®æ—¶é—´åŠå¯ç”¨æ—¶é—´æ€»å’Œæ¯”)ã€[`å“åº”æ—¶é•¿`](å“åº”æ—¶é•¿æ˜¯æŒ‡ç³»ç»Ÿå¯¹è¯·æ±‚ä½œå‡ºå“åº”çš„æ—¶é—´ï¼Œç”¨æˆ·å¯¹è¯¥æŒ‡æ ‡æœ‰ç›´è§‚æ„Ÿå—ã€‚)ï¼Œ......â€

è€Œè¿™äº›æŒ‡æ ‡çš„ç»¼åˆè¯„ä¼°åˆ†æ•°å°±æ˜¯ä¸€ä¸ªç³»ç»Ÿçš„å¥åº·å€¼ï¼Œä½†æ˜¯å¦‚æœåŒå­¦ä»¬å‡ ä¹å¾ˆå°‘å¬åˆ°è¿™äº›ä¸“ä¸šçš„åè¯ï¼Œä¹Ÿæ²¡æ¥è§¦è¿‡é«˜å¹¶å‘åœºæ™¯ï¼Œé‚£ä¹ˆå°±å¾ˆåƒæ¨¡æ‹Ÿè€ƒè€ƒäº†ä¸€ç™¾åˆ†ï¼Œä½†æ˜¯æ­£å¼è€ƒè¯•è€ƒç ¸äº†ã€‚æ²¡æœ‰æŠ€æœ¯åœºæ™¯ç»™æˆ‘ä»¬è¿›è¡Œè®­ç»ƒï¼Œè®©æˆ‘ä»¬ä¸æ–­çš„ä½“ä¼šç³»ç»Ÿçš„è„¾æ°”ç§‰æ€§ï¼Œå³ä¾¿ä½ æœ‰å†å¤šçš„æƒ³æ³•éƒ½æ²¡æ³•å®ç°ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœŸçš„æƒ³å­¦ä¹ ä¸€å®šè¦å»ä¸€ä¸ªæœ‰å®æ“çš„åœºæ™¯ï¼Œä¸‹æ°´è¯•è¯•æ‰èƒ½å­¦ä¼šç‹—åˆ¨ã€‚

æœ‰ä¸€ä¸ªå“²ç†åè¨€ï¼šâ€œ`ä½ çš„è§†é‡ç›²åŒºæœ‰å¤šå¤§ï¼Ÿ`â€

åŒæ ·çš„ä¸€æœ¬ä¹¦ã€åŒæ ·çš„ä¸€æ¡è·¯ã€åŒæ ·ä¸€åº§åŸï¼Œæˆ‘ä»¬çœŸçš„ä¼šä»¥ä¸ºç”Ÿæ´»å°±æ˜¯è¿™æ ·çš„å—ï¼Ÿæˆ‘ä»¬çœŸçš„æ²¡æœ‰é€‰æ‹©å—ï¼Ÿå…¶å®å¤§å¤šæ•°çš„æ—¶å€™é€‰é¡¹å°±æ˜¯æ‘†è®¾ï¼Œå¯èƒ½ç»™æˆ‘ä»¬å¤šå°‘æ¬¡ä¸€æ ·çš„æœºä¼šæˆ‘ä»¬éƒ½ä¼šåšå‡ºä¸€æ¨¡ä¸€æ ·çš„é€‰é¡¹ã€‚è¿™ä¸æ˜¯ä½ é€‰ä¸é€‰è€Œæ˜¯ä½ çš„è®¤çŸ¥èŒƒå›´å†³å®šäº†ä½ ä¸‹ä¸€ç§’åšçš„äº‹æƒ…ï¼Œå¦å¤–çš„ä¸€ä¸ªä¸‹ä¸€ç§’åˆå†³å®šäº†å†ä¸‹ä¸€ä¸ªä¸‹ä¸€ç§’ã€‚å°±åƒç®¡ä¸­çª¥è±¹ä¸€æ ·ï¼Œ20%çš„é¢ç§¯åœ¨ä½ è§†è§‰é‡Œéƒ½æ˜¯é»‘è‰²çš„ï¼Œç”šè‡³å°±æ€»æ˜¯å¿½ç•¥çœ‹ä¸åˆ°ï¼Œè€Œè¿™çœ‹ä¸åˆ°çš„20%å°±æ˜¯ç”Ÿå‘½ä¸­çš„æ—¶è¿ï¼ä½†ï¼Œäººå¯ä»¥å­¦ä¹ ï¼Œå¯ä»¥æˆé•¿ï¼Œå¯ä»¥è„±èƒæ¢éª¨ï¼Œå¯ä»¥åŠªåŠ›ä»˜å‡ºï¼Œé€šè¿‡ä¸€æ¬¡æ¬¡çš„èœ•å˜è€Œçœ‹åˆ°å‰©ä¸‹çš„20%ï¼

å·¥ç¨‹å¸ˆä»¬ç»å¸¸è¯´ï¼šâ€œ`æ²¡æœ‰è®¾è®¡å›¾çº¸ä½ æ•¢ç›–æ¥¼å—ï¼Ÿ`â€

ç¼–ç¨‹å¼€å‘ä¸­æœ€å¥½çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è®¾è®¡ï¼è¿ç”¨æ¶æ„æ€ç»´ã€ç»éªŒå¿ƒå¾—ã€æ‰åçµæ„Ÿï¼Œæ„å»ºå‡ºæœ€ä½³çš„ç³»ç»Ÿã€‚çœŸæ­£çš„ç ”å‘ä¼šæŠŠè‡ªå·±å†™å‡ºæ¥çš„ä»£ç å½“æˆè‰ºæœ¯å“æ¥æ¬£èµï¼Œä½ è¯´è¿™æ˜¯ä¸€ä»½å·¥ä½œï¼Œä½†åœ¨è¿™äº›äººçœ¼é‡Œè¿™ä¸åªæ˜¯ä¸€ä»½ç®€å•çš„å·¥ä½œï¼Œè¿™å°±æ˜¯å·¥åŒ ç²¾ç¥ã€‚å°±åƒå¯èƒ½æ—¶è€Œä½ ä¹Ÿä¼šä¸ºè‡ªå·±å› ä¸ºä¸€ä¸ª`å®Œç¾`çš„è®¾è®¡è€Œè±ªè¿ˆä¸‡ä¸ˆï¼Œä¸ºèƒ½ä¸Šçº¿ä¸€ä¸ªæ‰›å¾—ä½æ¯ç§’200ä¸‡è®¿é—®é‡çš„ç³»ç»Ÿä¼šç²¾ç¥ç„•å‘ã€‚è¿™æ ·çš„è‡ªè±ªæ„Ÿå°±æ˜¯ä¸€æ¬¡æ¬¡å’ç –ä¸€æ ·å«é«˜è„šåº•ï¼Œä¸æ–­çš„æŠŠä½ çš„è§†é‡æé«˜ï¼Œè®©ä½ èƒ½çœ‹åˆ°ä¸Šå±‚è®¾è®¡ä¹Ÿèƒ½çŸ¥æ™“æ ¹åŸºå»ºè®¾ã€‚å¯ä»¥æŠŠæ§å…¨å±€ï¼Œä¹Ÿå¯ä»¥æ²»ç†ç»†èŠ‚ã€‚è¿™ä¸€ä»½ä»½çŸ¥è¯†çš„æ²‰æ·€ï¼Œæ¥å¸®åŠ©ä½ ç»˜åˆ¶å‡ºä¸€å¼ ç³»ç»Ÿæ¶æ„è“å›¾ã€‚

## è´£ä»»é“¾æ¨¡å¼ ä»‹ç»

![wUJpU.png](https://i.im5i.com/2021/04/20/wUJpU.png)

è´£ä»»é“¾æ¨¡å¼çš„æ ¸å¿ƒæ˜¯è§£å†³ä¸€ç»„æœåŠ¡ä¸­çš„å…ˆåæ‰§è¡Œå¤„ç†å…³ç³»ï¼Œä½ å¯ä»¥ç†è§£æƒ³è±¡æˆå½“ä½ è¦è·³æ§½çš„æ—¶å€™è¢«å®‰æ’çš„æ˜æ˜ç™½ç™½çš„è¢«å„ä¸ªé¢†å¯¼ç­¾å­—æ”¾è¡Œã€‚

## æ¡ˆä¾‹æ¨¡æ‹Ÿ

### å¼•è¨€

![wUEjZ.png](https://i.im5i.com/2021/04/20/wUEjZ.png)

**åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿåœ¨618å¤§ä¿ƒæœŸé—´çš„ä¸šåŠ¡ç³»ç»Ÿä¸Šçº¿å®¡æ‰¹æµç¨‹åœºæ™¯**

åƒæ˜¯è¿™äº›ä¸€çº¿ç”µå•†ç±»çš„äº’è”ç½‘å…¬å¸ï¼Œé˜¿é‡Œã€äº¬ä¸œã€æ‹¼å¤šå¤šç­‰ï¼Œåœ¨618æœŸé—´éƒ½ä¼šåšä¸€äº›è¿è¥æ´»åŠ¨åœºæ™¯ä»¥åŠæä¾›çš„æ‰©å®¹å¤‡æˆ˜ï¼Œå°±åƒè¿‡å¹´æœŸé—´ç™¾åº¦çš„çº¢åŒ…ä¸€æ ·ã€‚ä½†æ˜¯æ‰€æœ‰å¼€å‘çš„è¿™äº›ç³»ç»Ÿéƒ½éœ€è¦é™†ç»­çš„ä¸Šçº¿ï¼Œå› ä¸ºä¸´è¿‘618æœ‰æ—¶å€™ä¹Ÿæœ‰ä¸€äº›ç´§æ€¥çš„è°ƒæ•´çš„éœ€è¦ä¸Šçº¿ï¼Œä½†ä¸ºäº†ä¿éšœçº¿ä¸Šç³»ç»Ÿçš„ç¨³å®šæ€§æ˜¯å°½å¯èƒ½çš„å‡å°‘ä¸Šçº¿çš„ï¼Œä¹Ÿä¼šç›¸åº”çš„å¢å¼ºå®¡æ‰¹åŠ›åº¦ã€‚å°±åƒä¸€çº§å“åº”ã€äºŒçº§å“åº”ä¸€æ ·ã€‚

è€Œè¿™å®¡æ‰¹çš„è¿‡ç¨‹åœ¨éšç€ç‰¹å®šæ—¶é—´ç‚¹ä¼šå¢åŠ ä¸åŒçº§åˆ«çš„è´Ÿè´£äººåŠ å…¥ï¼Œæ¯ä¸ªäººå°±åƒè´£ä»»é“¾æ¨¡å¼ä¸­çš„æ¯ä¸€ä¸ªæ ¸å¿ƒç‚¹ã€‚å¯¹äºç ”å‘å°ä¼™ä¼´å¹¶ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®¡æ‰¹æµç¨‹å¤„ç†ç»†èŠ‚ï¼Œåªéœ€è¦çŸ¥é“è¿™ä¸ªä¸Šçº¿æ›´ä¸¥æ ¼ï¼Œçº§åˆ«ä¹Ÿæ›´é«˜ï¼Œä½†å¯¹äºç ”å‘äººå‘˜æ¥è¯´åŒæ ·æ˜¯ç‚¹å‡»ç›¸åŒçš„æå®¡æŒ‰é’®ï¼Œç­‰å¾…å®¡æ ¸ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¨¡æ‹Ÿè¿™æ ·ä¸€ä¸ªä¸šåŠ¡è¯‰æ±‚åœºæ™¯ï¼Œä½¿ç”¨è´£ä»»é“¾çš„è®¾è®¡æ¨¡å¼æ¥å®ç°æ­¤åŠŸèƒ½ã€‚

### åœºæ™¯æ¨¡æ‹Ÿ

```markdown
- chain-responsibility-model-1
  - main
    - java
      - com.hcy
        - AuthService.java
```

### åœºæ™¯ç®€è¿°

**2.1 æ¨¡æ‹Ÿå®¡æ ¸æœåŠ¡**

```java
import java.util.Date;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

/**
 * æ¨¡æ‹Ÿå®¡æ ¸æœåŠ¡
 * @author HCY
 * @since 2021/4/21 12:53 ä¸‹åˆ
*/
public class AuthService {
    private static Map<String, Date> authMap = new ConcurrentHashMap<String, Date>();

    /**
     * æŸ¥è¯¢å®¡æ ¸ç»“æœ
     * @author HCY
     * @since 2021/4/21 12:57 ä¸‹åˆ
     * @param uId:
     * @param orderId:
     * @return java.util.Date
    */
    public static Date queryAuthInfo(String uId, String orderId) {
        return authMap.get(uId.concat(orderId));
    }

    /**
     * å¤„ç†å®¡æ ¸
     * @author HCY
     * @since 2021/4/21 12:58 ä¸‹åˆ
     * @param uId:
     * @param orderId:
     * @return void
    */
    public static void auth(String uId, String orderId) {
        authMap.put(uId.concat(orderId), new Date());
    }
}
```

## æ­£å¸¸è§£å†³æ–¹æ¡ˆ

### å·¥ç¨‹ç›®å½•

```markdown
- chain-responsibility-model-2
  - src.main.java.com.hcy
    - AuthController
```

### é¡¹ç›®ä»£ç 

```java
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class AuthController {
    /**
     * æ—¶é—´æ ¼å¼åŒ–
     * @author HCY
     * @since 2021/4/21 3:18 ä¸‹åˆ
    */
    private SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    public AuthInfo doAuth(String uId, String orderId, Date authDate) throws ParseException {

        // ä¸‰çº§å®¡æ‰¹
        Date date = AuthService.queryAuthInfo("1000013", orderId);
        if (null == date) return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå¾…ä¸‰çº§å®¡æ‰¹è´Ÿè´£äºº ", "ç‹å·¥");

        // äºŒçº§å®¡æ‰¹
        if (authDate.after(f.parse("2020-06-01 00:00:00")) && authDate.before(f.parse("2020-06-25 23:59:59"))) {
            date = AuthService.queryAuthInfo("1000012", orderId);
            if (null == date) return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå¾…äºŒçº§å®¡æ‰¹è´Ÿè´£äºº ", "å¼ ç»ç†");
        }

        // ä¸€çº§å®¡æ‰¹
        if (authDate.after(f.parse("2020-06-11 00:00:00")) && authDate.before(f.parse("2020-06-20 23:59:59"))) {
            date = AuthService.queryAuthInfo("1000011", orderId);
            if (null == date) return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå¾…ä¸€çº§å®¡æ‰¹è´Ÿè´£äºº ", "æ®µæ€»");
        }

        return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå®¡æ‰¹å®Œæˆ");
    }
}
```

#### å¼Šç«¯

```markdown
- è¿™é‡Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«åˆ¤æ–­äº†åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…ç”±ä¸åŒçš„äººå‘˜è¿›è¡Œå®¡æ‰¹ï¼Œå°±åƒ618ä¸Šçº¿çš„æ—¶å€™éœ€è¦ä¸‰ä¸ªè´Ÿè´£äººéƒ½å®¡æ‰¹æ‰èƒ½è®©ç³»ç»Ÿè¿›è¡Œä¸Šçº¿ã€‚

- åƒæ˜¯è¿™æ ·çš„åŠŸèƒ½çœ‹èµ·æ¥å¾ˆç®€å•çš„ï¼Œä½†æ˜¯å®é™…çš„ä¸šåŠ¡ä¸­ä¼šæœ‰å¾ˆå¤šéƒ¨é—¨ï¼Œä½†å¦‚æœè¿™æ ·å®ç°å°±å¾ˆéš¾è¿›è¡Œæ‰©å±•ï¼Œå¹¶ä¸”åœ¨æ”¹åŠ¨æ‰©å±•è°ƒæ•´ä¹Ÿéå¸¸éº»çƒ¦ã€‚
```

### è´£ä»»é“¾æ¨¡å¼é‡æ„ä»£ç 

#### å·¥ç¨‹é¡¹ç›®

```markdown
- chain-responsibility-model-3
  - src.main.java.com.hcy
    - cuisine
      - impl
        - Level1AuthLink.java
        - Level2AuthLink.java
        - Level3AuthLink.java
    - AuthInfo.java
    - AuthLink.java
```

#### æ¨¡å‹ç»“æ„

![wti4y.png](https://i.im5i.com/2021/04/21/wti4y.png)

```markdown
- ä¸Šå›¾æ˜¯è¿™ä¸ªä¸šåŠ¡æ¨¡å‹ä¸­è´£ä»»é“¾ç»“æ„çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œé€šè¿‡ä¸‰ä¸ªå®ç°äº†ç»Ÿä¸€æŠ½è±¡ç±»AuthLinkçš„ä¸åŒè§„åˆ™ï¼Œå†è¿›è¡Œè´£ä»»ç¼–æ’æ¨¡æ‹Ÿå‡ºä¸€æ¡é“¾è·¯ã€‚è¿™ä¸ªé“¾è·¯å°±æ˜¯ä¸šåŠ¡ä¸­çš„è´£ä»»é“¾ã€‚

- ä¸€èˆ¬åœ¨ä½¿ç”¨è´£ä»»é“¾æ—¶å€™å¦‚æœæ˜¯åœºæ™¯æ¯”è¾ƒå›ºå®šï¼Œå¯ä»¥é€šè¿‡å†™æ­»åˆ°ä»£ç ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚ä½†å¦‚æœä¸šåŠ¡åœºæ™¯ç»å¸¸å˜åŒ–å¯ä»¥åšæˆxmlé…ç½®çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå¯ä»¥è½åˆ°åº“é‡Œè¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚
```

#### ä»£ç éœ€æ±‚

##### è´£ä»»é“¾ä¸­è¿”å›å¯¹è±¡å®šä¹‰

```java
public class AuthInfo {

    private String code;
    private String info = "";

    public AuthInfo(String code, String ...infos) {
        this.code = code;
        for (String str:infos){
            this.info = this.info.concat(str);
        }
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getInfo() {
        return info;
    }

    public void setInfo(String info) {
        this.info = info;
    }
}
```

##### é“¾è·¯æŠ½è±¡ç±»å®šä¹‰

```java
/**
 * å®¡æ ¸è§„å®šï¼›
 * 1. 601-610 ä¸‰çº§å®¡æ‰¹ + äºŒçº§å®¡æ‰¹
 * 2. 611-620 ä¸‰çº§å®¡æ‰¹ + äºŒçº§å®¡æ‰¹ + ä¸€çº§å®¡æ‰¹
 * 3. å…¶ä»–æ—¶é—´ ä¸‰çº§å®¡æ‰¹
 */
public abstract class AuthLink {

    protected Logger logger = LoggerFactory.getLogger(AuthLink.class);

    protected SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");// æ—¶é—´æ ¼å¼åŒ–
    protected String levelUserId;                           // çº§åˆ«äººå‘˜ID
    protected String levelUserName;                         // çº§åˆ«äººå‘˜å§“å
    private AuthLink next;                                  // è´£ä»»é“¾

    public AuthLink(String levelUserId, String levelUserName) {
        this.levelUserId = levelUserId;
        this.levelUserName = levelUserName;
    }

    public AuthLink next() {
        return next;
    }

    public AuthLink appendNext(AuthLink next) {
        this.next = next;
        return this;
    }

    public abstract AuthInfo doAuth(String uId, String orderId, Date authDate);

}
```

##### å®¡æ ¸çš„å®ç°ç±»

```java
/**
 * ä¸€çº§è´Ÿè´£äºº
 */
public class Level1AuthLink extends AuthLink {

    public Level1AuthLink(String levelUserId, String levelUserName) {
        super(levelUserId, levelUserName);
    }

    @Override
    public AuthInfo doAuth(String uId, String orderId, Date authDate) {
        Date date = AuthService.queryAuthInfo(levelUserId, orderId);
        if (null == date) {
            return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå¾…ä¸€çº§å®¡æ‰¹è´Ÿè´£äºº ", levelUserName);
        }
        AuthLink next = super.next();
        if (null == next) {
            return new AuthInfo("0000", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šä¸€çº§å®¡æ‰¹å®Œæˆè´Ÿè´£äºº", " æ—¶é—´ï¼š", f.format(date), " å®¡æ‰¹äººï¼š", levelUserName);
        }

        return next.doAuth(uId, orderId, authDate);
    }

}
```

```java
/**
 * äºŒçº§è´Ÿè´£äºº
 */
public class Level2AuthLink extends AuthLink {

    private Date beginDate = f.parse("2020-06-11 00:00:00");
    private Date endDate = f.parse("2020-06-20 23:59:59");

    public Level2AuthLink(String levelUserId, String levelUserName) throws ParseException {
        super(levelUserId, levelUserName);
    }
    @Override
    public AuthInfo doAuth(String uId, String orderId, Date authDate) {
        Date date = AuthService.queryAuthInfo(levelUserId, orderId);
        if (null == date) {
            return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå¾…äºŒçº§å®¡æ‰¹è´Ÿè´£äºº ", levelUserName);
        }
        AuthLink next = super.next();
        if (null == next) {
            return new AuthInfo("0000", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šäºŒçº§å®¡æ‰¹å®Œæˆè´Ÿè´£äºº", " æ—¶é—´ï¼š", f.format(date), " å®¡æ‰¹äººï¼š", levelUserName);
        }

        if (authDate.before(beginDate) || authDate.after(endDate)) {
            return new AuthInfo("0000", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šäºŒçº§å®¡æ‰¹å®Œæˆè´Ÿè´£äºº", " æ—¶é—´ï¼š", f.format(date), " å®¡æ‰¹äººï¼š", levelUserName);
        }

        return next.doAuth(uId, orderId, authDate);
    }

}
```

```java
/**
 * ä¸‰çº§è´Ÿè´£äºº
 */
public class Level3AuthLink extends AuthLink {

    private Date beginDate = f.parse("2020-06-01 00:00:00");
    private Date endDate = f.parse("2020-06-25 23:59:59");

    public Level3AuthLink(String levelUserId, String levelUserName) throws ParseException {
        super(levelUserId, levelUserName);
    }
    @Override
    public AuthInfo doAuth(String uId, String orderId, Date authDate) {
        Date date = AuthService.queryAuthInfo(levelUserId, orderId);
        if (null == date) {
            return new AuthInfo("0001", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šå¾…ä¸‰çº§å®¡æ‰¹è´Ÿè´£äºº ", levelUserName);
        }
        AuthLink next = super.next();
        if (null == next) {
            return new AuthInfo("0000", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šä¸‰çº§å®¡æ‰¹è´Ÿè´£äººå®Œæˆ", " æ—¶é—´ï¼š", f.format(date), " å®¡æ‰¹äººï¼š", levelUserName);
        }

        if (authDate.before(beginDate) || authDate.after(endDate)) {
            return new AuthInfo("0000", "å•å·ï¼š", orderId, " çŠ¶æ€ï¼šä¸‰çº§å®¡æ‰¹è´Ÿè´£äººå®Œæˆ", " æ—¶é—´ï¼š", f.format(date), " å®¡æ‰¹äººï¼š", levelUserName);
        }

        return next.doAuth(uId, orderId, authDate);
    }

}
```

```markdown
- å¦‚ä¸Šä¸‰ä¸ªç±»ï¼›Level1AuthLinkã€Level2AuthLinkã€Level3AuthLinkï¼Œå®ç°äº†ä¸åŒçš„å®¡æ ¸çº§åˆ«å¤„ç†çš„ç®€å•é€»è¾‘ã€‚

- ä¾‹å¦‚ç¬¬ä¸€ä¸ªå®¡æ ¸ç±»ä¸­ä¼šå…ˆåˆ¤æ–­æ˜¯å¦å®¡æ ¸é€šè¿‡ï¼Œå¦‚æœæ²¡æœ‰å®¡æ ¸é€šè¿‡åˆ™è¿”å›ç»“æœç»™è°ƒç”¨æ–¹ï¼Œå¼•å¯¼å»å®¡æ ¸ã€‚ï¼ˆè¿™é‡Œç®€å•æ¨¡æ‹Ÿå®¡æ ¸åæœ‰æ—¶é—´ä¿¡æ¯ä¸ä¸ºç©ºï¼Œä½œä¸ºåˆ¤æ–­æ¡ä»¶ï¼‰

- åˆ¤æ–­å®Œæˆåè·å–ä¸‹ä¸€ä¸ªå®¡æ ¸èŠ‚ç‚¹ï¼›super.next();ï¼Œå¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœã€‚

- ä¹‹åæ˜¯æ ¹æ®ä¸åŒçš„ä¸šåŠ¡æ—¶é—´æ®µè¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦ï¼ŒäºŒçº§å’Œä¸€çº§çš„å®¡æ ¸ã€‚

- æœ€åè¿”å›ä¸‹ä¸€ä¸ªå®¡æ ¸ç»“æœï¼›next.doAuth(uId, orderId, authDate);ï¼Œæœ‰ç‚¹åƒé€’å½’è°ƒç”¨ã€‚
```

## æ€»ç»“

```markdown
- ä»ä¸Šé¢ä»£ç ä»ifè¯­å¥é‡æ„åˆ°ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼å¼€å‘å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ä»£ç ç»“æ„å˜å¾—æ¸…æ™°å¹²å‡€äº†ï¼Œä¹Ÿè§£å†³äº†å¤§é‡ifè¯­å¥çš„ä½¿ç”¨ã€‚å¹¶ä¸æ˜¯ifè¯­å¥ä¸å¥½ï¼Œåªä¸è¿‡ifè¯­å¥å¹¶ä¸é€‚åˆåšç³»ç»Ÿæµç¨‹è®¾è®¡ï¼Œä½†æ˜¯åœ¨åšåˆ¤æ–­å’Œè¡Œä¸ºé€»è¾‘å¤„ç†ä¸­è¿˜æ˜¯éå¸¸å¯ä»¥ä½¿ç”¨çš„ã€‚

- åœ¨æˆ‘ä»¬å‰é¢å­¦ä¹ ç»“æ„æ€§æ¨¡å¼ä¸­è®²åˆ°è¿‡ç»„åˆæ¨¡å¼ï¼Œå®ƒåƒæ˜¯ä¸€é¢—ç»„åˆæ ‘ä¸€æ ·ï¼Œæˆ‘ä»¬æ­å»ºå‡ºä¸€ä¸ªæµç¨‹å†³ç­–æ ‘ã€‚å…¶å®è¿™æ ·çš„æ¨¡å¼ä¹Ÿæ˜¯å¯ä»¥å’Œè´£ä»»é“¾æ¨¡å‹è¿›è¡Œç»„åˆæ‰©å±•ä½¿ç”¨ï¼Œè€Œè¿™éƒ¨åˆ†çš„é‡ç‚¹åœ¨äºå¦‚ä½•å…³è”é“¾è·¯çš„å…³è”ï¼Œæœ€ç»ˆçš„æ‰§è¡Œéƒ½æ˜¯åœ¨æ‰§è¡Œåœ¨ä¸­é—´çš„å…³ç³»é“¾ã€‚

- è´£ä»»é“¾æ¨¡å¼å¾ˆå¥½çš„å¤„ç†å•ä¸€èŒè´£å’Œå¼€é—­åŸåˆ™ï¼Œç®€å•äº†è€¦åˆä¹Ÿä½¿å¯¹è±¡å…³ç³»æ›´åŠ æ¸…æ™°ï¼Œè€Œä¸”å¤–éƒ¨çš„è°ƒç”¨æ–¹å¹¶ä¸éœ€è¦å…³å¿ƒè´£ä»»é“¾æ˜¯å¦‚ä½•è¿›è¡Œå¤„ç†çš„(ä»¥ä¸Šç¨‹åºä¸­å¯ä»¥æŠŠè´£ä»»é“¾çš„ç»„åˆè¿›è¡ŒåŒ…è£…ï¼Œåœ¨æä¾›ç»™å¤–éƒ¨ä½¿ç”¨)ã€‚ä½†é™¤äº†è¿™äº›ä¼˜ç‚¹å¤–ä¹Ÿéœ€è¦æ˜¯é€‚å½“çš„åœºæ™¯æ‰è¿›è¡Œä½¿ç”¨ï¼Œé¿å…é€ æˆæ€§èƒ½ä»¥åŠç¼–æ’æ··ä¹±è°ƒè¯•æµ‹è¯•ç–æ¼é—®é¢˜ã€‚
```

